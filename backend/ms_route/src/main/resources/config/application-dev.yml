# ===================================================================
# Spring Boot configuration for the "dev" profile.
#
# This configuration overrides the application.yml file.
#
# More information on profiles: https://www.jhipster.tech/profiles/
# More information on configuration properties: https://www.jhipster.tech/common-application-properties/
# ===================================================================

# ===================================================================
# Standard Spring Boot properties.
# Full reference is available at:
# http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
# ===================================================================

server:
  name: ms_routeDEV
  port: 8082
  forward-headers-strategy: native
  sql-port: 3307
  sql-name: ms_route

spring:
  config:
    import:
      # Import shared config first
      - "optional:file:/home/phungvip/Desktop/work-space/ticket-store/backend/ticket-store-central-config/application-dev.yml"
      # Then service-specific config (will override shared)
  # ===================================================================
  # DEV profile - fixed and tidied
  # ===================================================================
  cloud:
    function:
      definition: kafkaProducer;kafkaConsumer
    stream:
      bindings:
        kafkaConsumer-in-0:
          destination: ${server.name}.events
          content-type: application/*+avro
          group: ${kafka.utility.service-name:${server.name}}-route-group
          consumer:
            use-native-decoding: true
            max-attempts: 3
            back-off-initial-interval: 1000
            back-off-multiplier: 2.0
            back-off-max-interval: 10000
            concurrency: 2
            enable-dlq: true
            dlq-name: ${spring.cloud.stream.bindings.routeConsumer-in-0.destination}.dlq
        kafkaProducer-out-0:
          destination: ${server.name}.events
          contentType: application/*+avro
          producer:
            useNativeEncoding: true
